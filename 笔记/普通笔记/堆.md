#### 堆

* 对顶堆可以求数据流中的$K$大值



##### luogu1878舞蹈课[我的代码](/home/majiao/桌面/Link to 刷题/hdu/第一阶段/stl优先级队列priority_query/luogu1878舞蹈课/)

> 男女排成一排,每个人有一个权值$W_i$,每次选一对**相邻**
>
> 且权值差的绝对值最小的**异性**出来跳舞,选出来后右边的人
>
> 往空位补齐,接着选...如此反复直到没有相邻异性为止

* 用堆模拟即可
* 双向链表每次删除相邻两个被我写炸了






##### luogu2085最小函数值

> 对于开口向上的二次函数$F(X) = A_iX^2+B_iX+C_i$
>
> 给定$N$个$F(X)$的$A_i,B_i,C_i$
>
> 打印前$M$小的函数值(由于ABC都大于0所以F(x)在x>0是单调增)

* 顶点坐标公式
  * $x=-\frac{b}{2a}$
  * $y=\frac{4ac-b^2}{4a}$

* 暴力,从$x_{顶点}$向两边枚举,算出$y$丢进小根堆$O(M^2NlogM)$

* 先把所有$({F(x=1),id})$入堆,每次取顶打印,并把$(F(x+1),id)$

  入堆,最多打印$M$次,$O(N+M)$






##### luogu1801黑匣子(对顶堆)[我的代码](/home/majiao/桌面/Link to 刷题/hdu/第一阶段/stl优先级队列priority_query/luogu1801黑匣子对顶堆K大值/)

> 初始时,集合$S$为空且$K=0$提供两种操作:
>
> 1. $add(x)$向集合$S$添加一个数$x$
> 2. $get(x)$先$++K$,然后求集合$S$里的$K$小值

* 对顶堆,一个大根另一个小根,
* 维护大根堆堆顶是$K$大值,即保证大根堆$size=K$
* 对于每个$add(x)$,先把$x$丢到小根堆里,再把小根堆里的堆顶吐给大根堆,直到小根堆$heap_{min}$顶比大根堆$heap_{max}$顶大
* 对于$get(x)$,把大根堆吐到(或吃到)$size==K$为止







##### luogu1631(大佬的精彩思路,看的我目瞪口呆)

> 给定两个有序数组$a[~],b[~]$,从$a,b$中各取一个数相加,共有$N^2$个
>
> 和,打印$N^2$里的前$N$小个结果($N<=1e5$)

* $N^2$枚举每一种可能,时间爆炸,下面优化
* 因为有序,所以$i*j>N$时,则$a[i]+b[j]$一定不是前$N$个
* 于是就$break$掉第二层$for$,对于$1e5$只有不到120万个结果